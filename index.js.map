{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst myApiKey = \"49653024-3e206daf7693dc60176f31220\";\n\nexport async function getImagesByQuery(query, page = 1) {\n    return await axios.get(\"https://pixabay.com/api/\", {\n        params: {\n            key: myApiKey,\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            per_page: 15,\n            page\n        }\n    })\n\n}   ","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst btmMore = document.querySelector(\".load-more\")\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createGallery(images) {\n    const markUp = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <li class=\"card\" id=\"\">\n            <div class=\"card-img\">\n                <a href=${largeImageURL}><img src=${webformatURL} alt=${tags} title=\"\"/></a>\n            </div>\n            <ul class=\"card-info-list\">\n                <li class=\"card-info-item\">\n                    <p class=\"card-info-title\">Likes</p>\n                    <p class=\"card-info-text\">${likes}</p>\n                </li>\n                <li class=\"card-info-item\">\n                    <p class=\"card-info-title\">Views</p>\n                    <p class=\"card-info-text\">${views}</p>\n                </li>\n                <li class=\"card-info-item\">\n                    <p class=\"card-info-title\">Comments</p>\n                    <p class=\"card-info-text\">${comments}</p>\n                </li>\n                <li class=\"card-info-item\">\n                    <p class=\"card-info-title\">Downloads</p>\n                    <p class=\"card-info-text\">${downloads}</p>\n                </li>\n            </ul>\n        </li>`\n    ).join(\"\");\n    gallery.insertAdjacentHTML(\"beforeend\", markUp);\n    \n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\");\n}\n\nexport function showLoadMoreButton() {\n    btmMore.classList.remove(\"hidden\");\n}\n\nexport function hideLoadMoreButton() {\n    btmMore.classList.add(\"hidden\");\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api\"\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\"\n\nhideLoader();\n\nconst form = document.querySelector(\".form\");\nconst btnLoadMore = document.querySelector(\".load-more\");\nform.addEventListener(\"submit\", handleSubmit);\nbtnLoadMore.addEventListener(\"click\", handleLoadMore);\n\nlet userValue;\nlet page = 1;\n\nfunction handleSubmit(event) {\n    iziToast.destroy();\n    clearGallery();\n    showLoader();\n    event.preventDefault();\n\n    page = 1;\n    userValue = event.target.elements[\"search-text\"].value.toLowerCase();\n\n    hideLoader();\n\n    if (userValue.trim() === \"\") {\n        return iziToast.show({message: \"Search query cannot be empty\"});\n    }\n\n    getImagesByQuery(userValue, page)\n        .then(response => {\n            if (response.data.hits.length) {\n                const arrImg = response.data.hits;\n                createGallery(arrImg);\n                \n                if (page < response.data.total / response.config.params.per_page) {\n                    showLoadMoreButton();\n                }\n                return;\n            }\n            iziToast.show({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                backgroundColor: '#EF4040',\n                position: 'center',\n                messageColor: '#fafafb',\n                messageSize: '16px',\n                progressBarColor: '#b51b1b'\n            });\n        })\n        .catch(error => {\n            iziToast.show({\n                message: error.message,\n                backgroundColor: '#EF4040',\n                position: 'center',\n                messageColor: '#fafafb',\n                messageSize: '16px',\n                progressBarColor: '#b51b1b'\n            });\n        })\n\n    form.reset();\n}\n\nasync function handleLoadMore() {\n    page++;   \n    try {\n        hideLoadMoreButton();\n        showLoader();\n        const response = await getImagesByQuery(userValue, page);\n        if (page < response.data.total / response.config.params.per_page) {\n            createGallery(response.data.hits);\n            const card = document.querySelector(\".card\");\n            const cardHeight = card.getBoundingClientRect().height;\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: \"smooth\"\n            });\n            hideLoader();\n            showLoadMoreButton();\n            return;\n        }\n        hideLoader();\n        iziToast.show({\n            message: \"We're sorry, but you've reached the end of search results\",\n            backgroundColor: '#C8E3E3',\n            position: 'topRight',\n            messageColor: '#000',\n            messageSize: '16px',\n            progressBarColor: '#fff'\n        });\n    } catch (error) {\n        iziToast.show({\n            message: error.message,\n            backgroundColor: '#EF4040',\n            position: 'center',\n            messageColor: '#fafafb',\n            messageSize: '16px',\n            progressBarColor: '#b51b1b'\n        })\n    }\n}"],"names":["myApiKey","getImagesByQuery","query","page","axios","gallery","loader","btmMore","lightbox","SimpleLightbox","createGallery","images","markUp","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","btnLoadMore","handleSubmit","handleLoadMore","userValue","event","iziToast","response","arrImg","error","cardHeight"],"mappings":"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"}